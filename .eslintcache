[{"/Users/mac/Desktop/photo-gallery/src/App.js":"1","/Users/mac/Desktop/photo-gallery/src/index.js":"2","/Users/mac/Desktop/photo-gallery/src/components/Navigation.js":"3","/Users/mac/Desktop/photo-gallery/src/components/Signup.js":"4","/Users/mac/Desktop/photo-gallery/src/components/Login.js":"5","/Users/mac/Desktop/photo-gallery/src/context/useAuth.js":"6","/Users/mac/Desktop/photo-gallery/src/components/NotFound.js":"7","/Users/mac/Desktop/photo-gallery/src/components/Albums/CreateAlbum.js":"8","/Users/mac/Desktop/photo-gallery/src/firebase/index.js":"9","/Users/mac/Desktop/photo-gallery/src/components/Albums/Albums.js":"10","/Users/mac/Desktop/photo-gallery/src/components/Albums/Album.js":"11","/Users/mac/Desktop/photo-gallery/src/components/Albums/AddPhoto.js":"12","/Users/mac/Desktop/photo-gallery/src/components/Albums/Photos.js":"13","/Users/mac/Desktop/photo-gallery/src/components/AuthRoute.js":"14","/Users/mac/Desktop/photo-gallery/src/components/Albums/Photo.js":"15","/Users/mac/Desktop/photo-gallery/src/components/Home.js":"16","/Users/mac/Desktop/photo-gallery/src/components/Logout.js":"17","/Users/mac/Desktop/photo-gallery/src/components/ForgetPassword.js":"18","/Users/mac/Desktop/photo-gallery/src/components/Profile.js":"19"},{"size":2058,"mtime":1610448835249,"results":"20","hashOfConfig":"21"},{"size":230,"mtime":1609790482497,"results":"22","hashOfConfig":"21"},{"size":2226,"mtime":1610448719853,"results":"23","hashOfConfig":"21"},{"size":2716,"mtime":1609963943432,"results":"24","hashOfConfig":"21"},{"size":2635,"mtime":1610447371439,"results":"25","hashOfConfig":"21"},{"size":1102,"mtime":1610452408759,"results":"26","hashOfConfig":"21"},{"size":129,"mtime":1609842780471,"results":"27","hashOfConfig":"21"},{"size":1398,"mtime":1610273478097,"results":"28","hashOfConfig":"21"},{"size":817,"mtime":1609798077015,"results":"29","hashOfConfig":"21"},{"size":8228,"mtime":1610403611043,"results":"30","hashOfConfig":"21"},{"size":1439,"mtime":1610046465520,"results":"31","hashOfConfig":"21"},{"size":3506,"mtime":1610389730139,"results":"32","hashOfConfig":"21"},{"size":4969,"mtime":1610441545130,"results":"33","hashOfConfig":"21"},{"size":273,"mtime":1609956854112,"results":"34","hashOfConfig":"21"},{"size":4710,"mtime":1610446877256,"results":"35","hashOfConfig":"21"},{"size":1343,"mtime":1610444779860,"results":"36","hashOfConfig":"21"},{"size":263,"mtime":1610445450047,"results":"37","hashOfConfig":"21"},{"size":1949,"mtime":1610447883167,"results":"38","hashOfConfig":"21"},{"size":2214,"mtime":1610449496752,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"mjxhwx",{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/mac/Desktop/photo-gallery/src/App.js",[],"/Users/mac/Desktop/photo-gallery/src/index.js",[],["81","82"],"/Users/mac/Desktop/photo-gallery/src/components/Navigation.js",[],"/Users/mac/Desktop/photo-gallery/src/components/Signup.js",[],"/Users/mac/Desktop/photo-gallery/src/components/Login.js",[],"/Users/mac/Desktop/photo-gallery/src/context/useAuth.js",["83"],"/Users/mac/Desktop/photo-gallery/src/components/NotFound.js",[],["84","85"],"/Users/mac/Desktop/photo-gallery/src/components/Albums/CreateAlbum.js",[],"/Users/mac/Desktop/photo-gallery/src/firebase/index.js",[],"/Users/mac/Desktop/photo-gallery/src/components/Albums/Albums.js",[],"/Users/mac/Desktop/photo-gallery/src/components/Albums/Album.js",[],"/Users/mac/Desktop/photo-gallery/src/components/Albums/AddPhoto.js",[],"/Users/mac/Desktop/photo-gallery/src/components/Albums/Photos.js",["86"],"import { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Button } from \"react-bootstrap\";\nimport firebase, { db, storage } from \"../../firebase/index\";\nimport Photo from \"./Photo\";\nimport { useAuth } from \"../../context/useAuth\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nconst Photos = () => {\n    const [uploadedPhotos, setUploadedPhotos] = useState([]);\n    const [checkedPhotos, setCheckedPhotos] = useState([]);\n    const { id, name } = useParams();\n    const { currentUser } = useAuth();\n\n    const selectCheckedPhotos = () => {\n        return db\n            .collection(\"images\")\n            .where(\"albumId\", \"array-contains\", id)\n            .onSnapshot((snapshot) => {\n                const imgs = [];\n\n                snapshot.forEach((doc) => {\n                    if (doc.data().checked) {\n                        imgs.push({\n                            id: doc.id,\n                            ...doc.data(),\n                        });\n                    }\n                });\n                setCheckedPhotos(imgs);\n            });\n    };\n\n    useEffect(() => {\n        const unsubscribe = db\n            .collection(\"images\")\n            .where(\"albumId\", \"array-contains\", id)\n            .onSnapshot((snapshot) => {\n                const imgs = [];\n\n                snapshot.forEach((doc) => {\n                    imgs.push({\n                        id: doc.id,\n                        ...doc.data(),\n                    });\n                });\n\n                setUploadedPhotos(imgs);\n            });\n        selectCheckedPhotos();\n        return unsubscribe;\n    }, [id]);\n\n    const handleLike = (id) => {\n        db.collection(\"images\").doc(id).update({ like: true, dislike: false });\n        console.log(checkedPhotos);\n    };\n\n    const handleDislike = (id) => {\n        db.collection(\"images\").doc(id).update({ like: false, dislike: true });\n    };\n\n    const handleCheck = (id) => {\n        console.log(\"check\");\n        db.collection(\"images\").doc(id).update({ checked: false });\n        selectCheckedPhotos();\n    };\n\n    const handleUncheck = (id) => {\n        console.log(\"uncheck\");\n        db.collection(\"images\").doc(id).update({ checked: true });\n        selectCheckedPhotos();\n    };\n\n    const handleAddTONewAlbum = async () => {\n        const newId = uuidv4();\n\n        await db.collection(\"albums\").add({\n            name: `New ${name}`,\n            owner: currentUser.uid,\n            albumId: newId,\n            editing: false,\n        });\n\n        checkedPhotos.forEach(async (photo) => {\n            console.log(photo.id);\n            await db\n                .collection(\"images\")\n                .doc(photo.id)\n                .update({\n                    albumId: firebase.firestore.FieldValue.arrayUnion(newId),\n                    checked: false,\n                    like: false,\n                    dislike: false,\n                });\n        });\n    };\n\n    const handleDeletePhoto = () => {\n        checkedPhotos.forEach(async (photo) => {\n            await db\n                .collection(\"images\")\n                .doc(photo.id)\n                .get()\n                .then(async (data) => {\n                    const doc = data.data();\n                    console.log(photo.id);\n\n                    if (doc.albumId.length > 1) {\n                        console.log(\"more than 1\");\n                        await db\n                            .collection(\"images\")\n                            .doc(photo.id)\n                            .update({\n                                albumId: firebase.firestore.FieldValue.arrayRemove(\n                                    id\n                                ),\n                            });\n                    } else {\n                        console.log(\"less than 1\", photo.ref);\n                        const desertRef = storage.ref(doc.path);\n                        await desertRef.delete();\n                        db.collection(\"images\").doc(photo.id).delete();\n                    }\n                });\n        });\n    };\n\n    return (\n        <div className='my-3'>\n            <Photo\n                uploadedPhotos={uploadedPhotos}\n                handleLike={handleLike}\n                handleDislike={handleDislike}\n                handleCheck={handleCheck}\n                handleUncheck={handleUncheck}\n            />\n            {checkedPhotos.length > 0 ? (\n                <div className='my-3'>\n                    <Button variant='primary' onClick={handleAddTONewAlbum}>\n                        Add to new Album\n                    </Button>\n                    <Button\n                        variant='danger'\n                        className='ml-1'\n                        onClick={handleDeletePhoto}\n                    >\n                        Delete\n                    </Button>\n                </div>\n            ) : (\n                \"\"\n            )}\n        </div>\n    );\n};\n\nexport default Photos;\n","/Users/mac/Desktop/photo-gallery/src/components/AuthRoute.js",[],"/Users/mac/Desktop/photo-gallery/src/components/Albums/Photo.js",["87"],"/Users/mac/Desktop/photo-gallery/src/components/Home.js",[],"/Users/mac/Desktop/photo-gallery/src/components/Logout.js",[],"/Users/mac/Desktop/photo-gallery/src/components/ForgetPassword.js",[],"/Users/mac/Desktop/photo-gallery/src/components/Profile.js",["88","89"],{"ruleId":"90","replacedBy":"91"},{"ruleId":"92","replacedBy":"93"},{"ruleId":"94","severity":1,"message":"95","line":12,"column":12,"nodeType":"96","messageId":"97","endLine":12,"endColumn":19},{"ruleId":"90","replacedBy":"98"},{"ruleId":"92","replacedBy":"99"},{"ruleId":"100","severity":1,"message":"101","line":52,"column":8,"nodeType":"102","endLine":52,"endColumn":12,"suggestions":"103"},{"ruleId":"94","severity":1,"message":"104","line":19,"column":13,"nodeType":"96","messageId":"97","endLine":19,"endColumn":24},{"ruleId":"94","severity":1,"message":"105","line":4,"column":10,"nodeType":"96","messageId":"97","endLine":4,"endColumn":14},{"ruleId":"106","severity":1,"message":"107","line":15,"column":9,"nodeType":"108","messageId":"109","endLine":21,"endColumn":47},"no-native-reassign",["110"],"no-negated-in-lhs",["111"],"no-unused-vars","'loading' is assigned a value but never used.","Identifier","unusedVar",["110"],["111"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'selectCheckedPhotos'. Either include it or remove the dependency array.","ArrayExpression",["112"],"'currentUser' is assigned a value but never used.","'auth' is defined but never used.","no-unreachable","Unreachable code.","ExpressionStatement","unreachableCode","no-global-assign","no-unsafe-negation",{"desc":"113","fix":"114"},"Update the dependencies array to be: [id, selectCheckedPhotos]",{"range":"115","text":"116"},[1627,1631],"[id, selectCheckedPhotos]"]